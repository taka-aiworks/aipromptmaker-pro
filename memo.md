markdown# Nano-bananaå¯¾å¿œå®Œå…¨ä»•æ§˜æ›¸ - Phase 5å®Ÿè£…ä¸­ç‰ˆ

## ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ğŸ¯ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåŸºæœ¬æƒ…å ±
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå**: Nano-bananaå¯¾å¿œAIãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãƒ¡ãƒ¼ã‚«ãƒ¼
- **å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: Gemini 2.5 Flash Image (Google DeepMind)
- **é–‹ç™ºæœŸé–“**: Phase 1-4å®Œäº†ã€Phase 5å®Ÿè£…ä¸­
- **å®Œæˆåº¦**: 80% ğŸ”„
- **é©æ–°æ€§**: æ¥­ç•Œåˆãƒ¬ãƒ™ãƒ«ã®ç”»åƒç·¨é›†ç‰¹åŒ–ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ

### ğŸŒ Nano-bananaåŸºæœ¬æƒ…å ±
- **æ­£å¼åç§°**: Gemini 2.5 Flash Image
- **é–‹ç™ºå…ƒ**: Google DeepMind
- **é€šç§°**: Nano-bananaï¼ˆLMArenaè©•ä¾¡æ™‚ã®ã‚³ãƒ¼ãƒ‰ãƒãƒ¼ãƒ ï¼‰
- **ç”¨é€”**: ç”»åƒç·¨é›†ç‰¹åŒ–ï¼ˆæ—¢å­˜ç”»åƒã®ä¿®æ­£ãƒ»å¤‰æ›´ï¼‰
- **ç‰¹å¾´**: è‡ªç„¶è¨€èªã«ã‚ˆã‚‹ç·¨é›†æŒ‡ç¤ºã€ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ä¸€è²«æ€§ä¿æŒ

### ğŸš« é‡è¦ãªåˆ¶é™äº‹é …
- **NSFWå®Œå…¨éå¯¾å¿œ**: Googleåˆ©ç”¨è¦ç´„ã«ã‚ˆã‚Šæˆäººå‘ã‘ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç¦æ­¢
- **SFWè¦ç´ ã®ã¿å¯¾å¿œ**: å®‰å…¨æ€§ã‚’é‡è¦–ã—ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒªã‚·ãƒ¼
- **é€ã‹ã—å¿…é ˆ**: å…¨ç”Ÿæˆç”»åƒã«SynthIDé€ã‹ã—è‡ªå‹•æŒ¿å…¥

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ§‹æˆ

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰æ§‹æˆ
- **JavaScript ãƒ™ãƒ¼ã‚¹ã® SPA**ï¼ˆSingle Page Applicationï¼‰
- **ãƒ¢ã‚¸ãƒ¥ãƒ©ãƒ¼è¨­è¨ˆ**: æ©Ÿèƒ½ã”ã¨ã«åˆ†é›¢ã•ã‚ŒãŸJSãƒ•ã‚¡ã‚¤ãƒ«
- **ã‚¿ãƒ–å½¢å¼UI**: è¤‡æ•°ã®ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆå¯¾å¿œ
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°**: è¨­å®šå¤‰æ›´æ™‚ã®å³åº§ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆç”Ÿæˆ

### ğŸ“ ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ
project-root/
â”‚
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ core/
â”‚   â”‚   â”œâ”€â”€ app.js              # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆFORMATTERSå®šç¾©ã‚ã‚Šï¼‰
â”‚   â”‚   â”œâ”€â”€ commercial-lora.js  # å•†ç”¨LoRAç®¡ç†
â”‚   â”‚   â””â”€â”€ manga-mode.js       # æ¼«ç”»ãƒ¢ãƒ¼ãƒ‰æ©Ÿèƒ½
â”‚   â”‚
â”‚   â”œâ”€â”€ presets/
â”‚   â”‚   â”œâ”€â”€ manga-nsfw-presets.js
â”‚   â”‚   â”œâ”€â”€ manga-preset-system.js
â”‚   â”‚   â””â”€â”€ manga-sfw-presets.js
â”‚   â”‚
â”‚   â””â”€â”€ formatters/             # æ–°è¦è¿½åŠ 
â”‚       â”œâ”€â”€ nano-banana.js      # Nano-bananaãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿æœ¬ä½“ï¼ˆå¼·åŒ–ç‰ˆå®Œæˆï¼‰
â”‚       â”œâ”€â”€ nano-banana-ui.js   # UIçµ±åˆã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆé‡è¤‡é˜²æ­¢ç‰ˆå®Œæˆï¼‰
â”‚       â””â”€â”€ nano-banana-patch.js # ãƒ‘ãƒƒãƒã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚
â”œâ”€â”€ css/
â”‚   â””â”€â”€ styles.css              # ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆ
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ sfw-dictionary.js       # SFWè¾æ›¸ï¼ˆ47ã‚«ãƒ†ã‚´ãƒªï¼‰
â”‚   â”œâ”€â”€ nsfw-dictionary.js      # NSFWè¾æ›¸
â”‚   â””â”€â”€ commercial-lora.js      # å•†ç”¨LoRAè¾æ›¸
â”‚
â””â”€â”€ index.html                  # ãƒ¡ã‚¤ãƒ³HTMLãƒ•ã‚¡ã‚¤ãƒ«

### ğŸ”§ å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆå¯¾å¿œ

### Nano-bananaå‡ºåŠ›ä»•æ§˜
Edit the image.
[Important]: Please preserve the existing character features.

## ğŸš€ Phaseåˆ¥å®Œäº†çŠ¶æ³

### âœ… Phase 1: åŸºæœ¬ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ - å®Œäº†
- åŸºæœ¬æƒ…å ±ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼ˆæ–‡å­—åˆ—ãƒãƒƒãƒãƒ³ã‚°ç‰ˆï¼‰
- ç·¨é›†æŒ‡ç¤ºæ–‡ç”Ÿæˆï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ‘ã‚¿ãƒ¼ãƒ³å¯¾å¿œï¼‰
- Geminiç”¨å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
- CSVå¯¾å¿œï¼ˆãƒãƒƒãƒå‡¦ç†ç”¨ï¼‰

### âœ… Phase 2: UIçµ±åˆ - å®Œäº†
- ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆé¸æŠã«ã€ŒNano-banana (Gemini 2.5)ã€è¿½åŠ 
- æ³¨æ„æ›¸ãè¡¨ç¤ºï¼ˆé»„è‰²ã„ãƒ‘ãƒãƒ«ï¼‰
- å‹•çš„UIåˆ‡ã‚Šæ›¿ãˆï¼ˆé¸æŠæ™‚ã®ã¿è¡¨ç¤ºï¼‰
- æ¼«ç”»ãƒ¢ãƒ¼ãƒ‰ãƒ»é‡ç”£ãƒ¢ãƒ¼ãƒ‰ãƒ»å­¦ç¿’ãƒ¢ãƒ¼ãƒ‰ãƒ»æ’®å½±ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- é‡è¤‡é˜²æ­¢æ©Ÿèƒ½è¿½åŠ 

### âœ… Phase 3: å‹•ä½œçµ±åˆ - å®Œäº†
- FORMATTERSã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ‰‹å‹•ä½œæˆã§å‹•ä½œç¢ºèª
- æ¼«ç”»ãƒ¢ãƒ¼ãƒ‰ã§ã®å®Ÿè£…çµ±åˆ
- å®Ÿéš›ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆå¤‰æ›å‹•ä½œç¢ºèªï¼ˆã‚³ãƒ³ã‚½ãƒ¼ãƒ«ãƒ¬ãƒ™ãƒ«ï¼‰

### âœ… Phase 4: ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°é«˜åº¦åŒ– - å®Œäº†
- ã‚«ãƒ†ã‚´ãƒªãƒ™ãƒ¼ã‚¹ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°å®Ÿè£…ï¼ˆSFWè¾æ›¸47ã‚«ãƒ†ã‚´ãƒªå¯¾å¿œï¼‰
- æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°è¿½åŠ ï¼ˆè¾æ›¸å¤–ã‚¿ã‚°å¯¾å¿œï¼‰
- é«˜ç²¾åº¦é™¤å¤–ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆ90-100%é™¤å¤–ç‡é”æˆï¼‰
- ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½å……å®Ÿ
- è‹±èªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆç¢ºå®šï¼ˆEdit the imageå½¢å¼ï¼‰

### ğŸ”„ Phase 5: ã‚«ãƒ†ã‚´ãƒªåˆ¥å‡ºåŠ›å®Ÿè£… - å®Ÿè£…ä¸­
- **EDIT_INSTRUCTIONS**ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°å®Ÿè£…
- ã‚«ãƒ†ã‚´ãƒªåˆ¥è‹±èªæŒ‡ç¤ºæ–‡ç”Ÿæˆ
- è¤‡æ•°ã‚«ãƒ†ã‚´ãƒªã®çµ„ã¿åˆã‚ã›å‡¦ç†
- **app.jsçµ±åˆ**ï¼ˆFORMATTERSå®šç¾©è¿½åŠ ï¼‰â† ç¾åœ¨ã“ã“

## ğŸ”¬ æŠ€è¡“ä»•æ§˜è©³ç´°

### EDIT_INSTRUCTIONS ãƒ‘ã‚¿ãƒ¼ãƒ³å®šç¾©
```javascript
const EDIT_INSTRUCTIONS = {
  pose: {
    "standing": "change pose to standing",
    "sitting": "change pose to sitting", 
    "running": "change pose to running",
    "walking": "change pose to walking",
    "lying": "change pose to lying down",
    "arms crossed": "change pose to arms crossed",
    "hands on hips": "change pose to hands on hips",
    "waving": "make the character waving",
    "jumping": "change pose to jumping",
    "kneeling": "change pose to kneeling"
  },
  expressions: {
    "smiling": "change expression to smiling",
    "serious": "change expression to serious", 
    "surprised": "change expression to surprised",
    "angry": "change expression to angry",
    "sad": "change expression to sad",
    "happy": "change expression to happy",
    "confused": "change expression to confused",
    "embarrassed": "change expression to embarrassed",
    "determined": "change expression to determined",
    "worried": "change expression to worried"
  },
  background: {
    "school": "change background to school setting",
    "park": "set background to park scene",
    "beach": "change background to beach scene", 
    "city": "set background to city scene",
    "forest": "change background to forest scene",
    "room": "set background to indoor room",
    "cafe": "change background to cafe setting",
    "library": "set background to library",
    "castle": "change background to castle",
    "mountain": "set background to mountain scene",
    "classroom": "change background to classroom setting"
  },
  lighting: {
    "soft": "add soft lighting",
    "dramatic": "add dramatic lighting",
    "golden hour": "add golden hour lighting",
    "sunset": "add sunset lighting",
    "moonlight": "add moonlight",
    "studio": "add studio lighting",
    "natural": "add natural lighting",
    "warm": "add warm lighting"
  },
  effect_manga: {
    "sparkles": "add sparkle effects",
    "speed lines": "add speed lines",
    "impact": "add impact effects",
    "wind": "add wind effect",
    "cherry blossoms": "add cherry blossom petals",
    "bubbles": "add soap bubbles",
    "stars": "add starry effect",
    "flowers": "add flower petals"
  }
};
ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ–¹å¼D: ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‹è¾æ›¸ãƒã‚¤ãƒ–ãƒªãƒƒãƒ‰
47ã‚«ãƒ†ã‚´ãƒªåˆ†æ
javascriptconst SFW_CATEGORIES = {
  basic_attributes: ['solo', '1girl', '1boy', 'multiple_girls'],
  physical_features: ['petite', 'tall', 'short', 'slim'],
  hair_features: ['long_hair', 'short_hair', 'twin_tails'],
  eye_features: ['blue_eyes', 'brown_eyes', 'almond_eyes'],
  facial_features: ['round_face', 'oval_face', 'heart_face'],
  // ... 47ã‚«ãƒ†ã‚´ãƒªåˆè¨ˆ
};
12æ­£è¦è¡¨ç¾ãƒ‘ã‚¿ãƒ¼ãƒ³
javascriptconst FILTER_PATTERNS = [
  /\b(red|blue|green|yellow|orange|purple|pink|black|white|brown|blonde|silver)\s+(hair|eyes|skin)\b/gi,
  /\b(light|dark|pale|tan|fair)\s+(skin|complexion)\b/gi,
  /\b(1|one|single|multiple)\s*(girl|boy|person|character)s?\b/gi,
  // ... 12ãƒ‘ã‚¿ãƒ¼ãƒ³åˆè¨ˆ
];
ğŸ“‹ Phase 5 å®Ÿè£…ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ
ğŸ”„ ç¾åœ¨ã®ä½œæ¥­ï¼ˆapp.jsçµ±åˆï¼‰

 app.jså†…FORMATTERSå®šç¾©ã«nano-bananaè¿½åŠ 
 ã‚«ãƒ†ã‚´ãƒªåˆ¥EDIT_INSTRUCTIONSãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒãƒ³ã‚°å®Ÿè£…
 è¤‡æ•°ã‚«ãƒ†ã‚´ãƒªçµ„ã¿åˆã‚ã›ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
 è‹±èªãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆå‡ºåŠ›ç¢ºèª

ğŸ“Š ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé€²æ—

æŠ€è¡“çš„é”æˆåº¦: 80%ï¼ˆPhase 4å®Œäº†ã€Phase 5å®Ÿè£…ä¸­ï¼‰
UIçµ±åˆ: 100%å®Œæˆ
ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯: 100%å®Œæˆ
å‡ºåŠ›ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: 80%å®Œæˆï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ãƒ‘ã‚¿ãƒ¼ãƒ³å®Ÿè£…ä¸­ï¼‰

ğŸ¯ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
å„ªå…ˆåº¦1: app.jså†…FORMATTERSã«nano-bananaå®šç¾©è¿½åŠ 
å„ªå…ˆåº¦2: ã‚«ãƒ†ã‚´ãƒªåˆ¥è‹±èªæŒ‡ç¤ºæ–‡ç”Ÿæˆãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
å„ªå…ˆåº¦3: å®Ÿç’°å¢ƒã§ã®å‹•ä½œãƒ†ã‚¹ãƒˆ

æœ€çµ‚æ›´æ–°: Phase 5å®Ÿè£…ä¸­ - ã‚«ãƒ†ã‚´ãƒªåˆ¥å‡ºåŠ›å®Ÿè£…æ®µéš
